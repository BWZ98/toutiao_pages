(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[464],{7280:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return l}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"search-header"},[n("van-icon",{staticClass:"goback",attrs:{name:"arrow-left",color:"white",size:"0.48rem"},on:{click:function(e){return t.$router.back()}}}),n("van-search",{directives:[{name:"fofo",rawName:"v-fofo"}],attrs:{placeholder:"请输入搜索关键词",background:"#007BFF",shape:"round"},on:{input:t.inputFn,search:t.enterFn},model:{value:t.kw,callback:function(e){t.kw=e},expression:"kw"}})],1),t.kw?n("div",{staticClass:"sugg-list"},t._l(t.suggestList,(function(e,r){return n("div",{key:r,staticClass:"sugg-item",domProps:{innerHTML:t._s(t.lightFn(e,t.kw))},on:{click:function(n){return t.clickFn(e)}}})})),0):n("div",{staticClass:"search-history"},[n("van-cell",{attrs:{title:"搜索历史"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[n("van-icon",{staticClass:"search-icon",attrs:{name:"delete"},on:{click:t.deleteFn}})]},proxy:!0}])}),n("div",{staticClass:"history-list"},t._l(t.history,(function(e,r){return n("span",{key:r,staticClass:"history-item",on:{click:function(n){return t.hisClickFn(e)}}},[t._v(t._s(e))])})),0)],1)])},i=[],s=n(6198),a=(n(4603),n(8450),n(4916),n(8386),n(9714),n(5306),n(1038),n(8783),n(1539),n(189),n(3948),n(8862),n(8975),n(6183)),o={name:"SearchComp",data:function(){return{kw:"",timer:null,suggestList:[],history:JSON.parse(localStorage.getItem("history"))||[]}},methods:{inputFn:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout((0,s.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.kw.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,a.Bq)(t.kw);case 4:n=e.sent,t.suggestList=n.data.data.options;case 6:case"end":return e.stop()}}),e)}))),300)},lightFn:function(t,e){if(!t)return t;var n=new RegExp(e,"ig");return t.replace(n,(function(t){return'<span style="color:red;">'.concat(t,"</span>")}))},enterFn:function(){var t=this;this.history.push(this.kw),this.history=Array.from(new Set(this.history)),setTimeout((function(){t.$router.push({path:"/search/".concat(t.kw)})}),0)},clickFn:function(t){var e=this;this.history.push(t),this.history=Array.from(new Set(this.history)),setTimeout((function(){e.$router.push({path:"/search/".concat(t)})}),0)},hisClickFn:function(t){var e=this;setTimeout((function(){e.$router.push({path:"/search/".concat(t)})}),0)},deleteFn:function(){this.history=[]}},watch:{history:{deep:!0,handler:function(){localStorage.setItem("history",JSON.stringify(this.history))}}}},c=o,u=n(1001),h=(0,u.Z)(c,r,i,!1,null,"40752d5e",null),l=h.exports},1038:function(t,e,n){var r=n(2109),i=n(8457),s=n(7072),a=!s((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:a},{from:i})}}]);
//# sourceMappingURL=search-legacy.392ca62b.js.map