(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[177],{7893:function(t,n,e){"use strict";e.d(n,{Z:function(){return h}});var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("van-cell",{scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"title-box"},[e("span",[t._v(t._s(t.art.title))]),1===t.art.cover.type?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.art.cover.images[0],expression:"art.cover.images[0]"}],staticClass:"thumb",attrs:{alt:""}}):t._e()]),t.art.cover.type>1?e("div",{staticClass:"thumb-box"},t._l(t.art.cover.images,(function(t,n){return e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"item"}],key:n,staticClass:"thumb",attrs:{alt:""}})})),0):t._e()]},proxy:!0},{key:"label",fn:function(){return[e("div",{staticClass:"label-box"},[e("div",[e("span",[t._v(t._s(t._f("change")(t.art.aut_name))+t._s(t.art.art_id))]),e("span",[t._v(t._s(t.art.comm_count)+"评论")]),e("span",[t._v(t._s(t.art.pubdate))])]),e("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],attrs:{name:"cross"},on:{click:function(n){return n.stopPropagation(),t.MaskFn.apply(null,arguments)}}})],1)]},proxy:!0}])}),e("div",{on:{click:function(t){t.stopPropagation()}}},[e("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":t.bottomText},on:{close:t.closeFn,cancel:t.onCancel,select:t.onSelect},model:{value:t.show,callback:function(n){t.show=n},expression:"show"}})],1)],1)},r=[],i=(e(8309),e(9600),e(561),e(4916),e(3123),[{name:"不感兴趣"},{name:"反馈垃圾内容"}]),s=[{value:0,name:"其它问题"},{value:1,name:"标题夸张"},{value:2,name:"低俗色情"},{value:3,name:"错别字多"},{value:4,name:"旧闻重复"},{value:6,name:"内容不实"},{value:8,name:"侵权"},{value:5,name:"广告软文"},{value:7,name:"涉嫌违法犯罪"}],o={props:{art:Object,isShow:{type:Boolean,default:!0}},data:function(){return{show:!1,actions:i,bottomText:"取消"}},methods:{MaskFn:function(){this.show=!0},onCancel:function(){"返回"===this.bottomText&&(this.show=!0,this.actions=i,this.bottomText="取消")},onSelect:function(t){"反馈垃圾内容"===t.name?(this.actions=s,this.bottomText="返回"):"不感兴趣"===t.name?(this.$emit("dislikeFn",this.art.art_id),this.show=!1):(this.$emit("reportFn",this.art.art_id,t.value),this.show=!1)},closeFn:function(){this.actions=i,this.bottomText="取消"}},filters:{change:function(t){return t.split("").splice(2,3).join("")}}},c=o,l=e(1001),u=(0,l.Z)(c,a,r,!1,null,"d57e788c",null),h=u.exports},6249:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return L}});var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"home-container"},[e("div",{staticClass:"nav-container"},[e("van-nav-bar",{attrs:{fixed:""},scopedSlots:t._u([{key:"left",fn:function(){return[e("van-icon",{staticClass:"i-descrip",attrs:{name:"description",color:"#fff"}}),e("span",{staticClass:"text"},[t._v("头条资讯")])]},proxy:!0},{key:"right",fn:function(){return[e("van-icon",{staticClass:"i-search",attrs:{name:"search",color:"#fff"},on:{click:t.searchFn}})]},proxy:!0}])})],1),e("div",{staticClass:"sec-nav"},[e("van-tabs",{attrs:{sticky:"","offset-top":"1.2266667rem","before-change":t.beforeChangeFn},on:{change:t.changeFn},model:{value:t.channelID,callback:function(n){t.channelID=n},expression:"channelID"}},t._l(t.channelList,(function(n){return e("van-tab",{key:n.id,attrs:{title:n.name,name:n.id}},[e("ArticleList",{attrs:{channelID:t.channelID}})],1)})),1),e("van-icon",{staticClass:"moreChannels",attrs:{name:"plus",size:"0.37333334rem"},on:{click:function(n){t.show=!0}}})],1),e("div",[e("van-popup",{staticClass:"editBox",model:{value:t.show,callback:function(n){t.show=n},expression:"show"}},[e("ChannelEdit",{attrs:{userList:t.channelList,unCheckList:t.unCheckChannelList},on:{addChannelEV:t.addChannelFn,removeChannelEV:t.removeChannelFn,closeEV:t.closeFn,changeChannel:t.changeChannelFn}})],1)],1)])},r=[],i=e(6198),s=(e(1539),e(189),e(8783),e(3948),e(4747),e(4553),e(561),e(8975),e(6183)),o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(n){t.isLoading=n},expression:"isLoading"}},[e("van-list",{attrs:{finished:t.finished,"loading-text":"加载中...","finished-text":"没有更多了","immediate-check":!1,offset:"50"},on:{load:t.onLoad},model:{value:t.loading,callback:function(n){t.loading=n},expression:"loading"}},t._l(t.articleList,(function(n,a){return e("ArticleItem",{key:a,attrs:{art:n},on:{dislikeFn:t.dislikeFunc,reportFn:t.reportFunc},nativeOn:{click:function(e){return t.itemClickFn(n.art_id)}}})})),1)],1)],1)},c=[],l=e(4479),u=(e(9653),e(2222),e(7893)),h=e(8398),d={data:function(){return{articleList:[],loading:!1,finished:!1,timestamp:+new Date,isLoading:!1}},components:{ArticleItem:u.Z},props:{channelID:Number},created:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,s.ii)(t.channelID,+new Date);case 2:e=n.sent,t.articleList=e.data.data.results,t.timestamp=e.data.data.pre_timestamp;case 5:case"end":return n.stop()}}),n)})))()},methods:{onLoad:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,s.ii)(t.channelID,t.timestamp);case 2:e=n.sent,t.articleList=[].concat((0,l.Z)(t.articleList),(0,l.Z)(e.data.data.results)),t.timestamp=e.data.data.pre_timestamp,t.loading=!1,e.data.data.pre_timestamp||(t.finished=!0);case 7:case"end":return n.stop()}}),n)})))()},onRefresh:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.articleList=[],n.next=3,(0,s.ii)(t.channelID,+new Date);case 3:e=n.sent,t.articleList=e.data.data.results,t.timestamp=e.data.data.pre_timestamp,t.isLoading=!1;case 7:case"end":return n.stop()}}),n)})))()},dislikeFunc:function(t){return(0,i.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,s.AJ)(t);case 2:(0,h.Z)({type:"success",message:"反馈成功"});case 3:case"end":return n.stop()}}),n)})))()},reportFunc:function(t,n){return(0,i.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,s.sk)(t,n);case 2:(0,h.Z)({type:"success",message:"举报成功"});case 3:case"end":return e.stop()}}),e)})))()},itemClickFn:function(t){this.$router.push({path:"/article?art_id=".concat(t)})}}},m=d,f=e(1001),p=(0,f.Z)(m,o,c,!1,null,null,null),v=p.exports,w=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"popup-container"},[e("van-nav-bar",{staticClass:"pop-header",attrs:{title:"频道管理"},scopedSlots:t._u([{key:"right",fn:function(){return[e("van-icon",{attrs:{name:"cross",size:"0.37333334rem",color:"white"},on:{click:t.closeF}})]},proxy:!0}])}),e("div",{staticClass:"my-channel-box"},[e("div",{staticClass:"channel-title"},[t._m(0),e("span",{on:{click:t.editFn}},[t._v(" "+t._s(t.isEdit?"完成":"编辑")+" ")])]),e("van-row",{attrs:{type:"flex"}},t._l(t.userList,(function(n){return e("van-col",{key:n.id,attrs:{span:"6"},on:{click:function(e){return t.userChannelClickFn(n)}}},[e("div",{staticClass:"channel-item van-hairline--surround"},[t._v(" "+t._s(n.name)+" "),e("van-badge",{staticClass:"cross-badge",attrs:{color:"transparent"},scopedSlots:t._u([{key:"content",fn:function(){return[e("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isEdit&&0!==n.id,expression:"isEdit && obj.id !== 0"}],staticClass:"badge-icon",attrs:{name:"cross",color:"#cfcfcf",size:"0.32rem"}})]},proxy:!0}],null,!0)})],1)])})),1)],1),e("div",{staticClass:"more-channel-box"},[t._m(1),e("van-row",{attrs:{type:"flex"}},t._l(t.unCheckList,(function(n){return e("van-col",{key:n.id,attrs:{span:"6"},on:{click:function(e){return t.moreFn(n)}}},[e("div",{staticClass:"channel-item van-hairline--surround"},[t._v(t._s(n.name))])])})),1)],1)],1)},C=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("span",[t._v("我的频道 "),e("span",{staticClass:"small-title"},[t._v(" 点击进入频道 ")])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"channel-title"},[e("span",[t._v("点击添加更多频道：")])])}],g={data:function(){return{isEdit:!1}},methods:{editFn:function(){this.isEdit=!this.isEdit},moreFn:function(t){this.isEdit&&this.$emit("addChannelEV",t)},userChannelClickFn:function(t){this.isEdit?0!==t.id&&this.$emit("removeChannelEV",t):(this.$emit("closeEV"),this.$emit("changeChannel",t))},closeF:function(){this.$emit("closeEV"),this.isEdit=!1}},props:{userList:Array,unCheckList:Array}},x=g,k=(0,f.Z)(x,w,C,!1,null,"717ee6f8",null),_=k.exports,y={name:"HomeComp",components:{ArticleList:v,ChannelEdit:_},data:function(){return{channelID:0,channelList:[],allChannelList:[],show:!1,channelScroll:{}}},created:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){var e,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,s.lS)();case 2:return e=n.sent,t.channelList=e.data.data.channels,n.next=6,(0,s.Of)();case 6:a=n.sent,t.allChannelList=a.data.data.channels;case 8:case"end":return n.stop()}}),n)})))()},computed:{unCheckChannelList:function(){var t=new Set,n=[];return this.channelList.forEach((function(n){t.add(n.id)})),this.allChannelList.forEach((function(e){t.has(e.id)||n.push(e)})),n}},methods:{addChannelFn:function(t){var n=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.channelList.push(t),e.next=3,(0,s.w0)(n.channelList);case 3:case"end":return e.stop()}}),e)})))()},removeChannelFn:function(t){var n=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.channelList.findIndex((function(n){return n.id===t.id})),n.channelList.splice(a,1),e.next=4,(0,s.Mz)(t.id);case 4:case"end":return e.stop()}}),e)})))()},closeFn:function(){this.show=!1},changeChannelFn:function(t){this.channelID=t.id},searchFn:function(){this.$router.push("/search")},scorllFn:function(){this.$route.meta.scorllT=document.documentElement.scrollTop||document.body.scrollTop},beforeChangeFn:function(){var t=document.documentElement.scrollTop||document.body.scrollTop;return this.channelScroll[this.channelID]=t,!0},changeFn:function(){var t=this;this.$nextTick((function(){document.documentElement.scrollTop=t.channelScroll[t.channelID]}))}},activated:function(){window.addEventListener("scroll",this.scorllFn),document.documentElement.scrollTop=this.$route.meta.scorllT},deactivated:function(){window.removeEventListener("scroll",this.scorllFn)}},b=y,F=(0,f.Z)(b,a,r,!1,null,"05d58878",null),L=F.exports},4553:function(t,n,e){"use strict";var a=e(2109),r=e(2092).findIndex,i=e(1223),s="findIndex",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),a({target:"Array",proto:!0,forced:o},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},1038:function(t,n,e){var a=e(2109),r=e(8457),i=e(7072),s=!i((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:s},{from:r})},4479:function(t,n,e){"use strict";function a(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=new Array(n);e<n;e++)a[e]=t[e];return a}function r(t){if(Array.isArray(t))return a(t)}e.d(n,{Z:function(){return c}});e(2526),e(1817),e(1539),e(2165),e(8783),e(3948),e(1038);function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}e(7042),e(8309),e(4916),e(7601);function s(t,n){if(t){if("string"===typeof t)return a(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,n):void 0}}e(1703);function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return r(t)||i(t)||s(t)||o()}}}]);
//# sourceMappingURL=home-legacy.45df3abf.js.map