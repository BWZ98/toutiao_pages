{"version":3,"file":"js/login.7d130958.js","mappings":"0JAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,cAAc,CAACE,YAAY,eAAeC,MAAM,CAAC,MAAQ,QAAQH,EAAG,WAAW,CAACI,GAAG,CAAC,OAASR,EAAIS,WAAW,CAACL,EAAG,YAAY,CAACG,MAAM,CAAC,SAAW,GAAG,KAAO,MAAM,YAAc,SAAS,MAAQ,CACnU,CACEG,UAAU,EACVC,QAAS,aACTC,QAAS,mBACNC,MAAM,CAACC,MAAOd,EAAIe,KAAW,OAAEC,SAAS,SAAUC,GAAMjB,EAAIkB,KAAKlB,EAAIe,KAAM,SAAUE,IAAME,WAAW,gBAAgB,CAACf,EAAG,IAAI,CAACE,YAAY,yBAAyBC,MAAM,CAAC,KAAO,aAAaa,KAAK,gBAAgBhB,EAAG,YAAY,CAACG,MAAM,CAAC,SAAW,GAAG,KAAO,KAAK,YAAc,QAAQ,MAAQ,CACxS,CAAEG,UAAU,EAAMC,QAAS,UAAWC,QAAS,aAAeC,MAAM,CAACC,MAAOd,EAAIe,KAAS,KAAEC,SAAS,SAAUC,GAAMjB,EAAIkB,KAAKlB,EAAIe,KAAM,OAAQE,IAAME,WAAW,cAAc,CAACf,EAAG,IAAI,CAACE,YAAY,6BAA6BC,MAAM,CAAC,KAAO,aAAaa,KAAK,gBAAgBhB,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,aAAa,CAACE,YAAY,YAAYC,MAAM,CAAC,SAAWP,EAAIqB,KAAK,QAAUrB,EAAIqB,KAAK,eAAe,MAAM,MAAQ,GAAG,KAAO,OAAO,cAAc,WAAW,CAACrB,EAAIsB,GAAG,SAAS,IAAI,IAAI,IACpfC,EAAkB,G,8BC4CtB,GACAC,KAAAA,YACAC,OACA,OACAV,KAAAA,CACAW,OAAAA,GACAC,KAAAA,IAEAN,MAAAA,IAIAO,QAAAA,CACA,iBAIA,kBACA,aACA,IACA,0BACAC,EAAAA,EAAAA,GAAAA,CAAAC,KAAAA,UAAAnB,QAAAA,UACAoB,EAAAA,EAAAA,IAAAA,EAAAA,KAAAA,KAAAA,OAEAC,aAAAA,QAAAA,gBAAAA,EAAAA,KAAAA,KAAAA,eAGA,mBAEAC,KAAAA,KAAAA,OAAAA,MAAAA,MAAAA,MAEA,UACAJ,EAAAA,EAAAA,GAAAA,CAAAC,KAAAA,SAAAnB,QAAAA,YAEA,gBCrF0Q,I,UCQtQuB,GAAY,OACd,EACAnC,EACAwB,GACA,EACA,KACA,WACA,MAIF,EAAeW,EAAiB","sources":["webpack://toutiao/./src/views/login/index.vue?34ae","webpack://toutiao/src/views/login/index.vue","webpack://toutiao/./src/views/login/index.vue?13d0","webpack://toutiao/./src/views/login/index.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-container\"},[_c('van-nav-bar',{staticClass:\"page-nav-bar\",attrs:{\"title\":\"登录\"}}),_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"required\":\"\",\"name\":\"手机号\",\"placeholder\":\"请输入手机号\",\"rules\":[\n        {\n          required: true,\n          message: '请填写正确的手机号码',\n          pattern: /^1[3-9]\\d{9}$/,\n        } ]},model:{value:(_vm.user.mobile),callback:function ($$v) {_vm.$set(_vm.user, \"mobile\", $$v)},expression:\"user.mobile\"}},[_c('i',{staticClass:\"toutiao toutiao-shouji\",attrs:{\"slot\":\"left-icon\"},slot:\"left-icon\"})]),_c('van-field',{attrs:{\"required\":\"\",\"name\":\"密码\",\"placeholder\":\"请输入密码\",\"rules\":[\n        { required: true, message: '请填写六位密码', pattern: /^\\d{6}$/ } ]},model:{value:(_vm.user.code),callback:function ($$v) {_vm.$set(_vm.user, \"code\", $$v)},expression:\"user.code\"}},[_c('i',{staticClass:\"toutiao toutiao-yanzhengma\",attrs:{\"slot\":\"left-icon\"},slot:\"left-icon\"})]),_c('div',{staticClass:\"login-btn-wrap\"},[_c('van-button',{staticClass:\"login-btn\",attrs:{\"disabled\":_vm.load,\"loading\":_vm.load,\"loading-type\":\"登录中\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\"登录\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"login-container\">\r\n    <van-nav-bar title=\"登录\" class=\"page-nav-bar\"> </van-nav-bar>\r\n    <van-form @submit=\"onSubmit\">\r\n      <van-field\r\n        required\r\n        v-model=\"user.mobile\"\r\n        name=\"手机号\"\r\n        placeholder=\"请输入手机号\"\r\n        :rules=\"[\r\n          {\r\n            required: true,\r\n            message: '请填写正确的手机号码',\r\n            pattern: /^1[3-9]\\d{9}$/,\r\n          },\r\n        ]\"\r\n      >\r\n        <i slot=\"left-icon\" class=\"toutiao toutiao-shouji\"></i>\r\n      </van-field>\r\n      <!-- 万能密码246810 -->\r\n      <van-field\r\n        required\r\n        v-model=\"user.code\"\r\n        name=\"密码\"\r\n        placeholder=\"请输入密码\"\r\n        :rules=\"[\r\n          { required: true, message: '请填写六位密码', pattern: /^\\d{6}$/ },\r\n        ]\"\r\n      >\r\n        <i slot=\"left-icon\" class=\"toutiao toutiao-yanzhengma\"></i>\r\n      </van-field>\r\n      <div class=\"login-btn-wrap\">\r\n        <van-button\r\n          :disabled=\"load\"\r\n          :loading=\"load\"\r\n          loading-type=\"登录中\"\r\n          class=\"login-btn\"\r\n          block\r\n          type=\"info\"\r\n          native-type=\"submit\"\r\n          >登录</van-button\r\n        >\r\n      </div>\r\n    </van-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { userLoginAPI } from '@/api/index.js'\r\nimport { Notify } from 'vant'\r\nimport { setToken } from '@/utils/token.js'\r\nexport default {\r\n  name: 'loginPage',\r\n  data () {\r\n    return {\r\n      user: {\r\n        mobile: '',\r\n        code: ''\r\n      },\r\n      load: false\r\n    }\r\n  },\r\n  // axios会自动把对象转为json字符串，并且在添加参数content-type\r\n  methods: {\r\n    async onSubmit () {\r\n      // 获取数据\r\n      // 表单验证\r\n      // 提交数据请求登录\r\n      const user = this.user\r\n      this.load = true\r\n      try {\r\n        const res = await userLoginAPI(user)\r\n        Notify({ type: 'success', message: '登录成功' })\r\n        setToken(res.data.data.token)\r\n        // 保存刷新token\r\n        localStorage.setItem('refresh_token', res.data.data.refresh_token)\r\n        // 跳转一定要放在最后\r\n        // push压栈,可以回退;replace不可以回退\r\n        this.$router.push({\r\n          // 配合router.js中实现登录后回到原界面功能\r\n          path: this.$route.query.path || '/'\r\n        })\r\n      } catch (error) {\r\n        Notify({ type: 'danger', message: '账号或密码错误' })\r\n      }\r\n      this.load = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n//\r\n.login-container {\r\n  .toutiao {\r\n    font-size: 37px;\r\n  }\r\n  .login-btn-wrap {\r\n    padding: 53px 33px;\r\n    .login-btn {\r\n      background-color: #6db4fb;\r\n      border: none;\r\n    }\r\n  }\r\n}\r\n.page-nav-bar {\r\n  background-color: #3296fa;\r\n}\r\n/deep/.van-nav-bar__title {\r\n  color: #fff;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2ae196bd&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2ae196bd&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ae196bd\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onSubmit","required","message","pattern","model","value","user","callback","$$v","$set","expression","slot","load","_v","staticRenderFns","name","data","mobile","code","methods","Notify","type","setToken","localStorage","path","component"],"sourceRoot":""}