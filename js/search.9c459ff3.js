"use strict";(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[464],{7280:function(t,s,e){e.r(s),e.d(s,{default:function(){return l}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"search-header"},[e("van-icon",{staticClass:"goback",attrs:{name:"arrow-left",color:"white",size:"0.48rem"},on:{click:function(s){return t.$router.back()}}}),e("van-search",{directives:[{name:"fofo",rawName:"v-fofo"}],attrs:{placeholder:"请输入搜索关键词",background:"#007BFF",shape:"round"},on:{input:t.inputFn,search:t.enterFn},model:{value:t.kw,callback:function(s){t.kw=s},expression:"kw"}})],1),t.kw?e("div",{staticClass:"sugg-list"},t._l(t.suggestList,(function(s,i){return e("div",{key:i,staticClass:"sugg-item",domProps:{innerHTML:t._s(t.lightFn(s,t.kw))},on:{click:function(e){return t.clickFn(s)}}})})),0):e("div",{staticClass:"search-history"},[e("van-cell",{attrs:{title:"搜索历史"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-icon",{staticClass:"search-icon",attrs:{name:"delete"},on:{click:t.deleteFn}})]},proxy:!0}])}),e("div",{staticClass:"history-list"},t._l(t.history,(function(s,i){return e("span",{key:i,staticClass:"history-item",on:{click:function(e){return t.hisClickFn(s)}}},[t._v(t._s(s))])})),0)],1)])},r=[],n=e(6183),a={name:"SearchComp",data(){return{kw:"",timer:null,suggestList:[],history:JSON.parse(localStorage.getItem("history"))||[]}},methods:{inputFn(){clearTimeout(this.timer),this.timer=setTimeout((async()=>{if(!this.kw.length)return;const t=await(0,n.Bq)(this.kw);this.suggestList=t.data.data.options}),300)},lightFn(t,s){if(!t)return t;const e=new RegExp(s,"ig");return t.replace(e,(t=>`<span style="color:red;">${t}</span>`))},enterFn(){this.history.push(this.kw),this.history=Array.from(new Set(this.history)),setTimeout((()=>{this.$router.push({path:`/search/${this.kw}`})}),0)},clickFn(t){this.history.push(t),this.history=Array.from(new Set(this.history)),setTimeout((()=>{this.$router.push({path:`/search/${t}`})}),0)},hisClickFn(t){setTimeout((()=>{this.$router.push({path:`/search/${t}`})}),0)},deleteFn(){this.history=[]}},watch:{history:{deep:!0,handler(){localStorage.setItem("history",JSON.stringify(this.history))}}}},o=a,c=e(1001),h=(0,c.Z)(o,i,r,!1,null,"40752d5e",null),l=h.exports}}]);
//# sourceMappingURL=search.9c459ff3.js.map