"use strict";(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[535],{4933:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("van-nav-bar",{staticClass:"page-nav-bar",attrs:{title:"登录"}}),a("van-form",{on:{submit:e.onSubmit}},[a("van-field",{attrs:{required:"",name:"手机号",placeholder:"请输入手机号",rules:[{required:!0,message:"请填写正确的手机号码",pattern:/^1[3-9]\d{9}$/}]},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}},[a("i",{staticClass:"toutiao toutiao-shouji",attrs:{slot:"left-icon"},slot:"left-icon"})]),a("van-field",{attrs:{required:"",name:"密码",placeholder:"请输入密码",rules:[{required:!0,message:"请填写六位密码",pattern:/^\d{6}$/}]},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}},[a("i",{staticClass:"toutiao toutiao-yanzhengma",attrs:{slot:"left-icon"},slot:"left-icon"})]),a("div",{staticClass:"login-btn-wrap"},[a("van-button",{staticClass:"login-btn",attrs:{disabled:e.load,loading:e.load,"loading-type":"登录中",block:"",type:"info","native-type":"submit"}},[e._v("登录")])],1)],1)],1)},n=[],r=a(6198),o=(a(8975),a(6183)),i=a(8398),l=a(4224),u={name:"loginPage",data:function(){return{user:{mobile:"",code:""},load:!1}},methods:{onSubmit:function(){var e=this;return(0,r.Z)(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.user,e.load=!0,t.prev=2,t.next=5,(0,o.WW)(a);case 5:s=t.sent,(0,i.Z)({type:"success",message:"登录成功"}),(0,l.o4)(s.data.data.token),localStorage.setItem("refresh_token",s.data.data.refresh_token),e.$router.push({path:e.$route.query.path||"/"}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),(0,i.Z)({type:"danger",message:"账号或密码错误"});case 15:e.load=!1;case 16:case"end":return t.stop()}}),t,null,[[2,12]])})))()}}},c=u,d=a(1001),m=(0,d.Z)(c,s,n,!1,null,"2ae196bd",null),p=m.exports}}]);
//# sourceMappingURL=login-legacy.7a2f10b9.js.map